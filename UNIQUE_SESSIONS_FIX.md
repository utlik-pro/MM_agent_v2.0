# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—â–∏–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—Ö–æ–¥–∏–ª–∏ –Ω–∞ –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å voice widget'–æ–º, –≤—Å–µ —Å–ª—ã—à–∞–ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∫ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∫–æ–º–Ω–∞—Ç–µ LiveKit —Å –∏–º–µ–Ω–µ–º `'test-room'`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É.

### –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

#### 1. Frontend (`frontend/src/components/call-widget.tsx`)
- ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `generateSessionId()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
- üîÑ –ö–∞–∂–¥—ã–π widget —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `sessionId` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- üè† `roomName` —Ç–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ `sessionId`
- üì° –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –∫–æ–º–Ω–∞—Ç—ã

#### 2. Backend (`api/token.py`)
- üÜî –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `uuid` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID
- üè† –ï—Å–ª–∏ –∏–º—è –∫–æ–º–Ω–∞—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ: `room-{uuid.uuid4().hex[:12]}`
- üìù –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç

#### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üß™ –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `test-unique-sessions.html` —Å 3 –≤–∏–¥–∂–µ—Ç–∞–º–∏
- üöÄ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `test-unique-sessions.sh` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ Session ID:
```
session-{timestamp}-{random-string}
–ü—Ä–∏–º–µ—Ä: session-1703123456789-k3m9x7q2w
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:
```bash
./test-unique-sessions.sh
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `test-unique-sessions.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)
3. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∑–≤–æ–Ω–∏—Ç—å" –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ Room ID:
   ```
   üÜî Unique session ID: session-1703123456789-k3m9x7q2w
   üè† Using room: session-1703123456789-k3m9x7q2w
   üè† Room assignment: session-1703123456789-k3m9x7q2w for identity: user-1703123456791
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏:
- ‚úÖ –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–ª—ã—à–∞—Ç—å —Ç–æ–ª—å–∫–æ AI-–∞–≥–µ–Ω—Ç–∞ –≤ —Å–≤–æ–µ–π –∫–æ–º–Ω–∞—Ç–µ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –¥–æ–ª–∂–Ω—ã —Å–ª—ã—à–∞—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã:
1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: Widget –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `sessionId`
2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `sessionId` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `roomName`
3. **–ó–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞**: Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `roomName` –≤ backend
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã**: Backend —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
5. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–≤–æ–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ
6. **–ò–∑–æ–ª—è—Ü–∏—è**: AI-–∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å `roomName` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `roomName`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç
- üîí **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üö´ **–ù–µ—Ç –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è** –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤
- üéØ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏** —Å AI-–∞–≥–µ–Ω—Ç–æ–º
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 